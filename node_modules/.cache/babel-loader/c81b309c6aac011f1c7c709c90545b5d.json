{"ast":null,"code":"import _objectSpread from\"C:/Users/thism/Desktop/Project-Flashcards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/thism/Desktop/Project-Flashcards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/thism/Desktop/Project-Flashcards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/thism/Desktop/Project-Flashcards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import DeckInfoCard from\"./DeckInfoCard\";import{listDecks,deleteDeck}from\"../utils/api/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),decks=_useState2[0],setDecks=_useState2[1];useEffect(function(){setDecks([]);var abortController=new AbortController();function loadDecks(){return _loadDecks.apply(this,arguments);}function _loadDecks(){_loadDecks=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _decks;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return listDecks(abortController.signal);case 3:_decks=_context.sent;setDecks(_decks);_context.next=14;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(!(_context.t0.name===\"AbortError\")){_context.next=13;break;}console.log(\"Aborted\");_context.next=14;break;case 13:throw _context.t0;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _loadDecks.apply(this,arguments);}loadDecks();return function(){console.log(\"aborting\");abortController.abort();};},[]);function handleDeleteDeck(_x){return _handleDeleteDeck.apply(this,arguments);}function _handleDeleteDeck(){_handleDeleteDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm(\"Delete this deck?\\n\\nYou will not be able to recover it.\")){_context2.next=4;break;}_context2.next=3;return deleteDeck(id);case 3:setDecks(function(){return decks.filter(function(deck){return deck.id!==id;});});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteDeck.apply(this,arguments);}var rows=decks.map(function(deck){return DeckInfoCard(_objectSpread(_objectSpread({},deck),{},{handleDeleteDeck:handleDeleteDeck}));});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(Link,{to:\"/decks/new\",className:\"btn btn-secondary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg\"}),\" Create Deck\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-4\",children:rows})]});}export default Home;","map":{"version":3,"sources":["C:/Users/thism/Desktop/Project-Flashcards/src/Layout/Home.js"],"names":["React","useEffect","useState","Link","DeckInfoCard","listDecks","deleteDeck","Home","decks","setDecks","abortController","AbortController","loadDecks","signal","_decks","name","console","log","abort","handleDeleteDeck","id","window","confirm","filter","deck","rows","map"],"mappings":"4nBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,oBAAtC,C,6IAEA,QAASC,CAAAA,IAAT,EAAgB,CACd,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACAR,SAAS,CAAC,UAAM,CACdQ,QAAQ,CAAC,EAAD,CAAR,CACA,GAAMC,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CAFc,QAICC,CAAAA,SAJD,qIAId,oLAEuBP,CAAAA,SAAS,CAACK,eAAe,CAACG,MAAjB,CAFhC,QAEQC,MAFR,eAGIL,QAAQ,CAACK,MAAD,CAAR,CAHJ,oFAKQ,YAAMC,IAAN,GAAe,YALvB,2BAMMC,OAAO,CAACC,GAAR,CAAY,SAAZ,EANN,qHAJc,4CAgBdL,SAAS,GACT,MAAO,WAAM,CACXI,OAAO,CAACC,GAAR,CAAY,UAAZ,EACAP,eAAe,CAACQ,KAAhB,GACD,CAHD,CAID,CArBQ,CAqBN,EArBM,CAAT,CAFc,QAyBCC,CAAAA,gBAzBD,4JAyBd,kBAAgCC,EAAhC,0HAEIC,MAAM,CAACC,OAAP,CAAe,0DAAf,CAFJ,iDAIUhB,CAAAA,UAAU,CAACc,EAAD,CAJpB,QAKIX,QAAQ,CAAC,iBAAMD,CAAAA,KAAK,CAACe,MAAN,CAAa,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACJ,EAAL,GAAYA,EAAtB,EAAb,CAAN,EAAD,CAAR,CALJ,wDAzBc,mDAkCd,GAAMK,CAAAA,IAAI,CAAGjB,KAAK,CAACkB,GAAN,CAAU,SAACF,IAAD,QAAUpB,CAAAA,YAAY,gCAAMoB,IAAN,MAAYL,gBAAgB,CAAhBA,gBAAZ,GAAtB,EAAV,CAAb,CACA,mBACE,wCACE,YAAK,SAAS,CAAC,KAAf,uBACE,MAAC,IAAD,EAAM,EAAE,CAAC,YAAT,CAAsB,SAAS,CAAC,mBAAhC,wBACE,UAAG,SAAS,CAAC,eAAb,EADF,kBADF,EADF,cAME,YAAK,SAAS,CAAC,UAAf,UAA2BM,IAA3B,EANF,GADF,CAUD,CAED,cAAelB,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DeckInfoCard from \"./DeckInfoCard\";\nimport { listDecks, deleteDeck } from \"../utils/api/index\";\n\nfunction Home() {\n  const [decks, setDecks] = useState([]);\n  useEffect(() => {\n    setDecks([]);\n    const abortController = new AbortController();\n\n    async function loadDecks() {\n      try {\n        let _decks = await listDecks(abortController.signal);\n        setDecks(_decks);\n      } catch (error) {\n        if (error.name === \"AbortError\") {\n          console.log(\"Aborted\");\n        } else {\n          throw error;\n        }\n      }\n    }\n    loadDecks();\n    return () => {\n      console.log(\"aborting\");\n      abortController.abort();\n    };\n  }, []);\n\n  async function handleDeleteDeck(id) {\n    if (\n      window.confirm(\"Delete this deck?\\n\\nYou will not be able to recover it.\")\n    ) {\n      await deleteDeck(id);\n      setDecks(() => decks.filter((deck) => deck.id !== id));\n    }\n  }\n\n  const rows = decks.map((deck) => DeckInfoCard({ ...deck, handleDeleteDeck }));\n  return (\n    <>\n      <div className='row'>\n        <Link to='/decks/new' className='btn btn-secondary'>\n          <i className='bi bi-plus-lg'></i> Create Deck\n        </Link>\n      </div>\n      <div className='row my-4'>{rows}</div>\n    </>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}